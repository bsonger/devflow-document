[{"id":0,"href":"/docs/observability/attributes/","title":"Attributes","section":"observability","content":"Observability Labels / Attributes 规范# 本文档定义了 Metric / Trace / Log 的标准 Labels / Attributes，用于统一收集、查询和关联数据。\n其中 Labels / Attributes 主要分为两类：\n必选：核心维度，用于聚合和拆分指标 可选：辅助维度，可用于多集群、多环境、灰度或团队统计 1️⃣ Metric# 用于统计和聚合指标数据\n必选 Labels# Key 类型 说明 示例 metric.name string 指标名称 http_request_duration_seconds service.name string 服务名称 user-service deployment.environment string 部署环境 prod / staging http.method string HTTP 方法 GET http.route string 路由模板 /users/:id http.status_code int HTTP 状态码 200 trace_id string Trace ID（可选，用于关联 Metric 和 Trace） 2e71abb92e031efc2a7a1c4280959f4b 可选 Labels# Key 类型 说明 示例 cluster.name string 集群名称或 ID k8s-prod-01 namespace string K8s 命名空间 production pod.name string Pod 名称 user-service-5c7d8b9d7f-xyz12 container.name string 容器名称 user-service deployment.name string Deployment 名称 user-service region / zone string 地域 / 可用区 ap-southeast-1a app.version string 应用版本 v1.2.3 owner.team string 负责团队 backend-team feature.flag string 特性标记 new-login http.client string 调用方应用 frontend-app Metric Value / Measurement# Key 类型 说明 示例 http.server.duration duration 请求耗时 120ms http.request.size bytes 请求大小 2KB http.response.size bytes 响应大小 10KB 2️⃣ Trace# 用于分布式请求链路追踪\n必选 Attributes# Key 类型 说明 示例 trace_id string Trace ID 2e71abb92e031efc2a7a1c4280959f4b span_id string 当前 Span ID abc123def456 span.name string Span 名称 Tekton.CreatePipelineRun span.kind string Span 类型 server / client / producer / consumer span.status string Span 状态 ok / error http.method string HTTP 方法 GET http.route string 路由模板 /users/:id http.status_code int HTTP 状态码 200 可选 Attributes# Key 类型 说明 示例 parent_span_id string 父 Span ID xyz789ghi012 service.name string 服务名称 user-service deployment.environment string 部署环境 prod cluster.name string 集群名称 k8s-prod-01 pod.name string Pod 名称 user-service-5c7d8b9d7f-xyz12 container.name string 容器名称 user-service region / zone string 地域 / 可用区 ap-southeast-1a client.ip string 客户端 IP 10.0.0.1 user_agent.original string User-Agent curl/7.68.0 error.message string 错误信息 database timeout feature.flag string 特性标记 new-login Value / Measurement# Key 类型 说明 示例 span.duration duration Span 耗时 120ms 3️⃣ Log# 用于记录系统或业务日志\n必选 Attributes# Key 类型 说明 示例 log.level string 日志级别 INFO / WARN / ERROR log.logger string 日志记录器名称 gin / otelzap log.message string 日志内容 http request completed trace_id string Trace ID（可选，用于关联 Trace / Metric） 2e71abb92e031efc2a7a1c4280959f4b 可选 Attributes# Key 类型 说明 示例 span_id string Span ID（可选） abc123def456 service.name string 服务名称 user-service deployment.environment string 部署环境 prod cluster.name string 集群名称 k8s-prod-01 pod.name string Pod 名称 user-service-5c7d8b9d7f-xyz12 container.name string 容器名称 user-service region / zone string 地域 / 可用区 ap-southeast-1a client.ip string 客户端 IP 10.0.0.1 user_agent.original string User-Agent curl/7.68.0 error.message string 错误信息 database timeout feature.flag string 特性标记 new-login Value / Measurement# Key 类型 说明 示例 log.stacktrace string 错误堆栈信息（可选） at main.go:45 http.server.duration duration 请求耗时（可选，用于排查慢请求） 120ms "},{"id":1,"href":"/docs/observability/standard/","title":"Standard","section":"observability","content":"Observability Labels / Attributes 标准# 本文档定义了 Metric / Log / Trace 在 Observability 系统中的标准 Labels / Attributes，用于统一收集、查询和关联数据。\n1️⃣ Metric Labels / Attributes# 用于统计和聚合指标数据\nKey 类型 说明 示例 metric.name string 指标名称 http_request_duration_seconds http.method string HTTP 方法 GET http.route string 路由模板 /users/:id http.status_code int HTTP 状态码 200 trace_id string Trace ID（可选，用于关联 Metric 和 Trace） 2e71abb92e031efc2a7a1c4280959f4b Metric 主要关注统计、聚合和维度标签，HTTP 字段可以作为 Label 使用。\n2️⃣ Trace Attributes# 用于分布式追踪，追踪请求链路\nKey 类型 说明 示例 trace_id string Trace ID 2e71abb92e031efc2a7a1c4280959f4b span_id string 当前 Span ID abc123def456 parent_span_id string 父 Span ID xyz789ghi012 span.name string Span 名称 Tekton.CreatePipelineRun span.kind string Span 类型 server / client / producer / consumer span.status string Span 状态 ok / error http.method string HTTP 方法 GET http.route string 路由模板 /users/:id http.status_code int HTTP 状态码 200 http.server.duration duration 请求耗时 120ms error.message string 错误信息（可选） database timeout client.ip string 客户端 IP 10.0.0.1 user_agent.original string User-Agent curl/7.68.0 Trace 数据用于完整请求链路追踪，可以与 Metric 和 Log 关联。\n3️⃣ Log Attributes# 用于记录系统或应用日志\nKey 类型 说明 示例 trace_id string Trace ID 2e71abb92e031efc2a7a1c4280959f4b span_id string Span ID（可选） abc123def456 log.level string 日志级别 INFO / WARN / ERROR log.logger string 日志记录器名称 gin / otelzap log.message string 日志文本 http request completed log.stacktrace string 可选，错误堆栈 at main.go:45 http.method string HTTP 方法 GET http.route string 路由模板 /users/:id http.status_code int HTTP 状态码 200 http.server.duration duration 请求耗时 120ms error.message string 错误信息（可选） database timeout client.ip string 客户端 IP 10.0.0.1 user_agent.original string User-Agent curl/7.68.0 Log 数据用于记录事件，可与 Trace / Metric 关联，便于问题排查。\n"}]