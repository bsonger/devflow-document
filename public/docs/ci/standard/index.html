<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="企业云原生平台标准 CI 流程# 1. 目标# 本标准 CI 流程旨在实现：
自动化构建、测试、发布流程 镜像和构建产物安全可追溯 与云原生平台安全策略和 Observability 集成 支持多项目、多环境的复用 确保企业级安全规范落地 2. 流程概览# 代码提交 → 代码扫描 → 单元/集成测试 → 构建镜像 → SBOM 生成 → 镜像签名 → 漏洞扫描 → Artifact 发布 → 通知 &amp; 指标
3. 流程阶段与功能# 阶段 功能描述 实现工具 / Tekton Task 核心规范 源码管理 拉取代码，支持分支/commit/tag Tekton git-clone Task 可追溯，每次构建对应唯一 commit 代码扫描 静态分析、SAST SonarQube / CodeQL 阻止不合规代码提交 单元/集成测试 执行测试并生成报告 Tekton Test Task 生成可追踪测试报告 构建镜像 构建容器镜像 Buildah / Kaniko 不允许手工 push，镜像不可变 SBOM 生成 软件组成清单生成 Syft / Grype 用于安全审计与漏洞扫描 镜像签名 Cosign 签名 Tekton Cosign Task 支持 keyless/OIDC，保证镜像可信 漏洞扫描 镜像安全扫描 Trivy / Clair 阻止高危漏洞镜像上线 Artifact 发布 Push 镜像 / Helm / Chart Harbor / OCI Registry 支持 digest 部署，保证不可篡改 通知 &amp; 指标 告警及指标收集 Slack / DingTalk / Prometheus / Grafana Pipeline 状态、构建指标上报 4. 参数化设计# 支持可配置参数： git-url, git-revision, image-name, image-tag, Dockerfile, manifest-name 可复用 Pipeline 支持多项目、多分支构建 支持 Workspace 共享： 源码、Docker 配置、SSH Key、Secrets 5. 串联顺序设计# 推荐 Pipeline 流程顺序：
">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/docs/ci/standard/">
  <meta property="og:site_name" content="Devflow">
  <meta property="og:title" content="Devflow">
  <meta property="og:description" content="企业云原生平台标准 CI 流程# 1. 目标# 本标准 CI 流程旨在实现：
自动化构建、测试、发布流程 镜像和构建产物安全可追溯 与云原生平台安全策略和 Observability 集成 支持多项目、多环境的复用 确保企业级安全规范落地 2. 流程概览# 代码提交 → 代码扫描 → 单元/集成测试 → 构建镜像 → SBOM 生成 → 镜像签名 → 漏洞扫描 → Artifact 发布 → 通知 &amp; 指标
3. 流程阶段与功能# 阶段 功能描述 实现工具 / Tekton Task 核心规范 源码管理 拉取代码，支持分支/commit/tag Tekton git-clone Task 可追溯，每次构建对应唯一 commit 代码扫描 静态分析、SAST SonarQube / CodeQL 阻止不合规代码提交 单元/集成测试 执行测试并生成报告 Tekton Test Task 生成可追踪测试报告 构建镜像 构建容器镜像 Buildah / Kaniko 不允许手工 push，镜像不可变 SBOM 生成 软件组成清单生成 Syft / Grype 用于安全审计与漏洞扫描 镜像签名 Cosign 签名 Tekton Cosign Task 支持 keyless/OIDC，保证镜像可信 漏洞扫描 镜像安全扫描 Trivy / Clair 阻止高危漏洞镜像上线 Artifact 发布 Push 镜像 / Helm / Chart Harbor / OCI Registry 支持 digest 部署，保证不可篡改 通知 &amp; 指标 告警及指标收集 Slack / DingTalk / Prometheus / Grafana Pipeline 状态、构建指标上报 4. 参数化设计# 支持可配置参数： git-url, git-revision, image-name, image-tag, Dockerfile, manifest-name 可复用 Pipeline 支持多项目、多分支构建 支持 Workspace 共享： 源码、Docker 配置、SSH Key、Secrets 5. 串联顺序设计# 推荐 Pipeline 流程顺序：">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">


  <meta itemprop="name" content="Devflow">
  <meta itemprop="description" content="企业云原生平台标准 CI 流程# 1. 目标# 本标准 CI 流程旨在实现：
自动化构建、测试、发布流程 镜像和构建产物安全可追溯 与云原生平台安全策略和 Observability 集成 支持多项目、多环境的复用 确保企业级安全规范落地 2. 流程概览# 代码提交 → 代码扫描 → 单元/集成测试 → 构建镜像 → SBOM 生成 → 镜像签名 → 漏洞扫描 → Artifact 发布 → 通知 &amp; 指标
3. 流程阶段与功能# 阶段 功能描述 实现工具 / Tekton Task 核心规范 源码管理 拉取代码，支持分支/commit/tag Tekton git-clone Task 可追溯，每次构建对应唯一 commit 代码扫描 静态分析、SAST SonarQube / CodeQL 阻止不合规代码提交 单元/集成测试 执行测试并生成报告 Tekton Test Task 生成可追踪测试报告 构建镜像 构建容器镜像 Buildah / Kaniko 不允许手工 push，镜像不可变 SBOM 生成 软件组成清单生成 Syft / Grype 用于安全审计与漏洞扫描 镜像签名 Cosign 签名 Tekton Cosign Task 支持 keyless/OIDC，保证镜像可信 漏洞扫描 镜像安全扫描 Trivy / Clair 阻止高危漏洞镜像上线 Artifact 发布 Push 镜像 / Helm / Chart Harbor / OCI Registry 支持 digest 部署，保证不可篡改 通知 &amp; 指标 告警及指标收集 Slack / DingTalk / Prometheus / Grafana Pipeline 状态、构建指标上报 4. 参数化设计# 支持可配置参数： git-url, git-revision, image-name, image-tag, Dockerfile, manifest-name 可复用 Pipeline 支持多项目、多分支构建 支持 Workspace 共享： 源码、Docker 配置、SSH Key、Secrets 5. 串联顺序设计# 推荐 Pipeline 流程顺序：">
  <meta itemprop="wordCount" content="249">

<title>Standard | Devflow</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/docs/ci/standard/">
<link rel="stylesheet" href="/book.min.6970156cec683193d93c9c4edaf0d56574e4361df2e0c1be4f697ae81c3ba55f.css" integrity="sha256-aXAVbOxoMZPZPJxO2vDVZXTkNh3y4MG&#43;T2l66Bw7pV8=" crossorigin="anonymous">




  
</head>
<body dir="ltr" class="book-kind-page book-type-docs">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Devflow</span>
  </a>
</h2>














  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4bd032e4e5fe1323a134583cafeecf06" class="toggle" checked />
    <label for="section-4bd032e4e5fe1323a134583cafeecf06" class="flex">
      <a role="button" class="">
        CI</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/ci/standard/" class="active">
      Standard</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/ci/component/" class="">
      Components</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0fc280a0e74cc087db99dcd67aadd7bb" class="toggle"  />
    <label for="section-0fc280a0e74cc087db99dcd67aadd7bb" class="flex">
      <a role="button" class="">
        CD</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
    
      
        <li>
          
  
  

  
    <a href="/docs/cd/component/" class="">
      Components</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6884c320646745efe1e09831aa35ad5b" class="toggle"  />
    <label for="section-6884c320646745efe1e09831aa35ad5b" class="flex">
      <a role="button" class="">
        observability</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/observability/component/" class="">
      Component</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/observability/attributes/" class="">
      Attributes</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/observability/standard/" class="">
      Standard</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/component/" class="">
      All Components</a>
  

        </li>
      
    
  </ul>













</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>



  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header hidden">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/icons/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>Standard</h3>

  <label for="toc-control">
    
  </label>
</div>


  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="企业云原生平台标准-ci-流程">企业云原生平台标准 CI 流程<a class="anchor" href="#%e4%bc%81%e4%b8%9a%e4%ba%91%e5%8e%9f%e7%94%9f%e5%b9%b3%e5%8f%b0%e6%a0%87%e5%87%86-ci-%e6%b5%81%e7%a8%8b">#</a></h1>
<h2 id="1-目标">1. 目标<a class="anchor" href="#1-%e7%9b%ae%e6%a0%87">#</a></h2>
<p>本标准 CI 流程旨在实现：</p>
<ul>
<li>自动化构建、测试、发布流程</li>
<li>镜像和构建产物安全可追溯</li>
<li>与云原生平台安全策略和 Observability 集成</li>
<li>支持多项目、多环境的复用</li>
<li>确保企业级安全规范落地</li>
</ul>
<hr>
<h2 id="2-流程概览">2. 流程概览<a class="anchor" href="#2-%e6%b5%81%e7%a8%8b%e6%a6%82%e8%a7%88">#</a></h2>
<p>代码提交 → 代码扫描 → 单元/集成测试 → 构建镜像 → SBOM 生成 → 镜像签名 → 漏洞扫描 → Artifact 发布 → 通知 &amp; 指标</p>
<hr>
<h2 id="3-流程阶段与功能">3. 流程阶段与功能<a class="anchor" href="#3-%e6%b5%81%e7%a8%8b%e9%98%b6%e6%ae%b5%e4%b8%8e%e5%8a%9f%e8%83%bd">#</a></h2>
<table>
  <thead>
      <tr>
          <th>阶段</th>
          <th>功能描述</th>
          <th>实现工具 / Tekton Task</th>
          <th>核心规范</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>源码管理</td>
          <td>拉取代码，支持分支/commit/tag</td>
          <td>Tekton <code>git-clone</code> Task</td>
          <td>可追溯，每次构建对应唯一 commit</td>
      </tr>
      <tr>
          <td>代码扫描</td>
          <td>静态分析、SAST</td>
          <td>SonarQube / CodeQL</td>
          <td>阻止不合规代码提交</td>
      </tr>
      <tr>
          <td>单元/集成测试</td>
          <td>执行测试并生成报告</td>
          <td>Tekton Test Task</td>
          <td>生成可追踪测试报告</td>
      </tr>
      <tr>
          <td>构建镜像</td>
          <td>构建容器镜像</td>
          <td>Buildah / Kaniko</td>
          <td>不允许手工 push，镜像不可变</td>
      </tr>
      <tr>
          <td>SBOM 生成</td>
          <td>软件组成清单生成</td>
          <td>Syft / Grype</td>
          <td>用于安全审计与漏洞扫描</td>
      </tr>
      <tr>
          <td>镜像签名</td>
          <td>Cosign 签名</td>
          <td>Tekton Cosign Task</td>
          <td>支持 keyless/OIDC，保证镜像可信</td>
      </tr>
      <tr>
          <td>漏洞扫描</td>
          <td>镜像安全扫描</td>
          <td>Trivy / Clair</td>
          <td>阻止高危漏洞镜像上线</td>
      </tr>
      <tr>
          <td>Artifact 发布</td>
          <td>Push 镜像 / Helm / Chart</td>
          <td>Harbor / OCI Registry</td>
          <td>支持 digest 部署，保证不可篡改</td>
      </tr>
      <tr>
          <td>通知 &amp; 指标</td>
          <td>告警及指标收集</td>
          <td>Slack / DingTalk / Prometheus / Grafana</td>
          <td>Pipeline 状态、构建指标上报</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="4-参数化设计">4. 参数化设计<a class="anchor" href="#4-%e5%8f%82%e6%95%b0%e5%8c%96%e8%ae%be%e8%ae%a1">#</a></h2>
<ul>
<li>支持可配置参数：
<ul>
<li><code>git-url</code>, <code>git-revision</code>, <code>image-name</code>, <code>image-tag</code>, <code>Dockerfile</code>, <code>manifest-name</code></li>
</ul>
</li>
<li>可复用 Pipeline 支持多项目、多分支构建</li>
<li>支持 Workspace 共享：
<ul>
<li>源码、Docker 配置、SSH Key、Secrets</li>
</ul>
</li>
</ul>
<hr>
<h2 id="5-串联顺序设计">5. 串联顺序设计<a class="anchor" href="#5-%e4%b8%b2%e8%81%94%e9%a1%ba%e5%ba%8f%e8%ae%be%e8%ae%a1">#</a></h2>
<p>推荐 Pipeline 流程顺序：</p>
<p><code>clone → test → build → sbom → sign → scan → push → notify</code></p>
<ul>
<li>使用 Tekton <code>runAfter</code> 或 DAG 定义依赖关系</li>
<li>每个阶段可独立复用 Task，保证灵活性</li>
</ul>
<hr>
<h2 id="6-安全策略">6. 安全策略<a class="anchor" href="#6-%e5%ae%89%e5%85%a8%e7%ad%96%e7%95%a5">#</a></h2>
<ul>
<li>镜像签名 (Cosign)</li>
<li>镜像来源限制 (白名单 Registry)</li>
<li>Artifact 可追溯 (Label / Digest)</li>
<li>构建凭证安全 (OIDC / Tekton Secrets)</li>
<li>与 Kyverno / OPA Gatekeeper 联动</li>
</ul>
<hr>
<h2 id="7-可观测性设计">7. 可观测性设计<a class="anchor" href="#7-%e5%8f%af%e8%a7%82%e6%b5%8b%e6%80%a7%e8%ae%be%e8%ae%a1">#</a></h2>
<ul>
<li><strong>日志</strong>：Pipeline Step 日志统一收集</li>
<li><strong>指标</strong>：构建时长、失败次数、漏洞数量、测试覆盖率</li>
<li><strong>追踪</strong>：可集成 OpenTelemetry，将 Trace 与 CI/CD 流程关联</li>
</ul>
<hr>
<h2 id="8-标准-ci-流程示意图">8. 标准 CI 流程示意图<a class="anchor" href="#8-%e6%a0%87%e5%87%86-ci-%e6%b5%81%e7%a8%8b%e7%a4%ba%e6%84%8f%e5%9b%be">#</a></h2>
<p>代码提交 → 代码扫描 → 单元/集成测试 → 构建镜像 → SBOM 生成 → 镜像签名 → 漏洞扫描 → Artifact 发布 → 通知 &amp; 指标</p>
<hr>
<h2 id="9-核心思想">9. 核心思想<a class="anchor" href="#9-%e6%a0%b8%e5%bf%83%e6%80%9d%e6%83%b3">#</a></h2>
<ol>
<li><strong>可复用</strong>：Pipeline 参数化 + Task 复用</li>
<li><strong>安全可信</strong>：签名 + SBOM + 漏洞扫描</li>
<li><strong>可追溯</strong>：Git commit + Image Label + Artifact digest</li>
<li><strong>自动化</strong>：无需人工操作，通知自动触发</li>
</ol>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">

<div>

</div>

<div>

</div>

</div>





  
  
  
  <div class="flex flex-wrap justify-between">
    <span>
    
    </span>
    <span>
    
      <a href="/docs/ci/component/" class="flex align-center">
        <span>Components</span>
        <img src="/icons/forward.svg" class="book-icon" alt="Forward" />
      </a>
    
    </span>
  </div>
  


 
        
  
 
        
        
  
 
        
  
  
    <script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script>
  

      </footer>

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  
 
  </main>

  
</body>
</html>




















