<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="ğŸŸ¢ Normalï¼ˆRollingï¼‰å‘å¸ƒå®æˆ˜ï¼šArgo CD &#43; Kubernetes Deployment# Normalï¼ˆRollingï¼‰å‘å¸ƒåŸºäº Kubernetes Deployment çš„æ»šåŠ¨æ›´æ–°èƒ½åŠ›ï¼ˆRollingUpdateï¼‰ï¼Œé€‚åˆå¤§å¤šæ•°æ™®é€šä¸šåŠ¡åœºæ™¯ã€‚
ğŸ—ºï¸ 1. Devflow Normalï¼ˆRollingï¼‰å‘å¸ƒæµç¨‹å›¾ï¼ˆç¤ºä¾‹ï¼‰# flowchart LR A[Devflow Console] --&gt; B[Devflow Job] B --&gt; C[Argo CD Application] C --&gt; D[Kubernetes Deployment] C --&gt; CS[Application Synced] CS --&gt; R0[Resources Applied] C -. watch .-&gt; F[Devflow Controller] D -. watch .-&gt; F F --&gt; M[(MongoDB)] M --&gt;|æ›´æ–° steps / job status| F D --&gt; S0 subgraph Rolling Steps S0[Applied] --&gt; S1[Rolling Update] --&gt; S2[Verify] S2 --&gt; S3[Completed] S2 -. Failed .-&gt; SF[Failed] SF --&gt; RB[Rollback to Stable] endè¯´æ˜ï¼š
">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/docs/cd/normal/">
  <meta property="og:site_name" content="Devflow">
  <meta property="og:title" content="Normal (Rolling)">
  <meta property="og:description" content="ğŸŸ¢ Normalï¼ˆRollingï¼‰å‘å¸ƒå®æˆ˜ï¼šArgo CD &#43; Kubernetes Deployment# Normalï¼ˆRollingï¼‰å‘å¸ƒåŸºäº Kubernetes Deployment çš„æ»šåŠ¨æ›´æ–°èƒ½åŠ›ï¼ˆRollingUpdateï¼‰ï¼Œé€‚åˆå¤§å¤šæ•°æ™®é€šä¸šåŠ¡åœºæ™¯ã€‚
ğŸ—ºï¸ 1. Devflow Normalï¼ˆRollingï¼‰å‘å¸ƒæµç¨‹å›¾ï¼ˆç¤ºä¾‹ï¼‰# flowchart LR A[Devflow Console] --&gt; B[Devflow Job] B --&gt; C[Argo CD Application] C --&gt; D[Kubernetes Deployment] C --&gt; CS[Application Synced] CS --&gt; R0[Resources Applied] C -. watch .-&gt; F[Devflow Controller] D -. watch .-&gt; F F --&gt; M[(MongoDB)] M --&gt;|æ›´æ–° steps / job status| F D --&gt; S0 subgraph Rolling Steps S0[Applied] --&gt; S1[Rolling Update] --&gt; S2[Verify] S2 --&gt; S3[Completed] S2 -. Failed .-&gt; SF[Failed] SF --&gt; RB[Rollback to Stable] endè¯´æ˜ï¼š">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">


  <meta itemprop="name" content="Normal (Rolling)">
  <meta itemprop="description" content="ğŸŸ¢ Normalï¼ˆRollingï¼‰å‘å¸ƒå®æˆ˜ï¼šArgo CD &#43; Kubernetes Deployment# Normalï¼ˆRollingï¼‰å‘å¸ƒåŸºäº Kubernetes Deployment çš„æ»šåŠ¨æ›´æ–°èƒ½åŠ›ï¼ˆRollingUpdateï¼‰ï¼Œé€‚åˆå¤§å¤šæ•°æ™®é€šä¸šåŠ¡åœºæ™¯ã€‚
ğŸ—ºï¸ 1. Devflow Normalï¼ˆRollingï¼‰å‘å¸ƒæµç¨‹å›¾ï¼ˆç¤ºä¾‹ï¼‰# flowchart LR A[Devflow Console] --&gt; B[Devflow Job] B --&gt; C[Argo CD Application] C --&gt; D[Kubernetes Deployment] C --&gt; CS[Application Synced] CS --&gt; R0[Resources Applied] C -. watch .-&gt; F[Devflow Controller] D -. watch .-&gt; F F --&gt; M[(MongoDB)] M --&gt;|æ›´æ–° steps / job status| F D --&gt; S0 subgraph Rolling Steps S0[Applied] --&gt; S1[Rolling Update] --&gt; S2[Verify] S2 --&gt; S3[Completed] S2 -. Failed .-&gt; SF[Failed] SF --&gt; RB[Rollback to Stable] endè¯´æ˜ï¼š">
  <meta itemprop="wordCount" content="229">

<title>Normal (Rolling) | Devflow</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/docs/cd/normal/">
<link rel="stylesheet" href="/book.min.6970156cec683193d93c9c4edaf0d56574e4361df2e0c1be4f697ae81c3ba55f.css" integrity="sha256-aXAVbOxoMZPZPJxO2vDVZXTkNh3y4MG&#43;T2l66Bw7pV8=" crossorigin="anonymous">




  
</head>
<body dir="ltr" class="book-kind-page book-type-docs">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Devflow</span>
  </a>
</h2>














  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4bd032e4e5fe1323a134583cafeecf06" class="toggle"  />
    <label for="section-4bd032e4e5fe1323a134583cafeecf06" class="flex">
      <a href="/docs/ci/" class="">
        CI</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/ci/queue/" class="">
      Queue</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/ci/standard/" class="">
      Standard</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/ci/architecture/" class="">
      CI Architecture</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/ci/component/" class="">
      Components</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0fc280a0e74cc087db99dcd67aadd7bb" class="toggle" checked />
    <label for="section-0fc280a0e74cc087db99dcd67aadd7bb" class="flex">
      <a href="/docs/cd/" class="">
        CD</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/cd/architecture/" class="">
      Architecture</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/cd/component/" class="">
      Components</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/cd/standard/" class="">
      Standard</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/cd/canary/" class="">
      Canary</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/cd/blue_green/" class="">
      Blue-green</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/cd/normal/" class="active">
      Normal (Rolling)</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6884c320646745efe1e09831aa35ad5b" class="toggle"  />
    <label for="section-6884c320646745efe1e09831aa35ad5b" class="flex">
      <a href="/docs/observability/" class="">
        observability</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/observability/component/" class="">
      Component</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/observability/standard/" class="">
      Standard</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/observability/attributes/" class="">
      Attributes</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3ca2284b1a7ea15cff3e16ed44e3c015" class="toggle"  />
    <label for="section-3ca2284b1a7ea15cff3e16ed44e3c015" class="flex">
      <a href="/docs/devflow/" class="">
        devflow</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/devflow/application/" class="">
      Application</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/devflow/job/" class="">
      Job</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/devflow/manifest/" class="">
      Manifest</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-97bc183e640cafe9ca9da46d45661ec8" class="toggle"  />
    <label for="section-97bc183e640cafe9ca9da46d45661ec8" class="flex">
      <a href="/docs/devflow-controller/" class="">
        devflow-controller</a>
      <img src="/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/devflow-controller/canary/" class="">
      Canary</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/component/" class="">
      All Components</a>
  

        </li>
      
    
  </ul>













</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>



  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header hidden">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/icons/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>Normal (Rolling)</h3>

  <label for="toc-control">
    
  </label>
</div>


  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="-normalrollingå‘å¸ƒå®æˆ˜argo-cd--kubernetes-deployment">ğŸŸ¢ Normalï¼ˆRollingï¼‰å‘å¸ƒå®æˆ˜ï¼šArgo CD + Kubernetes Deployment<a class="anchor" href="#-normalrolling%e5%8f%91%e5%b8%83%e5%ae%9e%e6%88%98argo-cd--kubernetes-deployment">#</a></h1>
<p>Normalï¼ˆRollingï¼‰å‘å¸ƒåŸºäº <strong>Kubernetes Deployment</strong> çš„æ»šåŠ¨æ›´æ–°èƒ½åŠ›ï¼ˆRollingUpdateï¼‰ï¼Œé€‚åˆå¤§å¤šæ•°æ™®é€šä¸šåŠ¡åœºæ™¯ã€‚</p>
<hr>
<h2 id="-1-devflow-normalrollingå‘å¸ƒæµç¨‹å›¾ç¤ºä¾‹">ğŸ—ºï¸ 1. Devflow Normalï¼ˆRollingï¼‰å‘å¸ƒæµç¨‹å›¾ï¼ˆç¤ºä¾‹ï¼‰<a class="anchor" href="#-1-devflow-normalrolling%e5%8f%91%e5%b8%83%e6%b5%81%e7%a8%8b%e5%9b%be%e7%a4%ba%e4%be%8b">#</a></h2>
<pre class="mermaid">flowchart LR
    A[Devflow Console] --&gt; B[Devflow Job]
    B --&gt; C[Argo CD Application]
    C --&gt; D[Kubernetes Deployment]

    C --&gt; CS[Application Synced]
    CS --&gt; R0[Resources Applied]

    C -. watch .-&gt; F[Devflow Controller]
    D -. watch .-&gt; F
    F --&gt; M[(MongoDB)]
    M --&gt;|æ›´æ–° steps / job status| F

    D --&gt; S0
    subgraph Rolling Steps
        S0[Applied] --&gt; S1[Rolling Update] --&gt; S2[Verify]
        S2 --&gt; S3[Completed]
        S2 -. Failed .-&gt; SF[Failed]
        SF --&gt; RB[Rollback to Stable]
    end</pre><script src="/mermaid.min.js"></script><script>mermaid.initialize({"flowchart":{"useMaxWidth":true},"theme":"default"})</script><p>è¯´æ˜ï¼š</p>
<ul>
<li>å‘å¸ƒé“¾è·¯ï¼šDevflow Console è§¦å‘ Jobï¼Œç”Ÿæˆ Argo CD Applicationï¼Œä¸‹å‘ Deploymentã€‚</li>
<li>æ§åˆ¶é—­ç¯ï¼šDevflow Controller ç›‘å¬ Application ä¸ Deployment çŠ¶æ€ï¼Œå›å†™ Mongo çš„ <code>steps</code> ä¸ <code>job status</code>ã€‚</li>
<li>Normal èŠ‚å¥ï¼šRolling Update å®Œæˆåè¿›å…¥ Completedã€‚</li>
</ul>
<hr>
<h2 id="-2-ç«¯åˆ°ç«¯æ­¥éª¤devflow-é©±åŠ¨">ğŸ§­ 2. ç«¯åˆ°ç«¯æ­¥éª¤ï¼ˆDevflow é©±åŠ¨ï¼‰<a class="anchor" href="#-2-%e7%ab%af%e5%88%b0%e7%ab%af%e6%ad%a5%e9%aa%a4devflow-%e9%a9%b1%e5%8a%a8">#</a></h2>
<ol>
<li>
<p><strong>Devflow åˆ›å»º Application æˆåŠŸ</strong></p>
<ul>
<li>Devflow Job åˆ›å»º Argo CD Application</li>
<li>Application è¿›å…¥ <code>Synced</code>ï¼ˆä¸ä¸€å®š <code>Healthy</code>ï¼‰</li>
</ul>
</li>
<li>
<p><strong>Argo CD åŒæ­¥å¹¶åˆ›å»º/æ›´æ–°èµ„æºæˆåŠŸ</strong></p>
<ul>
<li>Argo CD ç›‘å¬åˆ° Application å˜æ›´</li>
<li>ç”Ÿæˆ/æ›´æ–° Deploymentã€Service ç­‰èµ„æº</li>
</ul>
</li>
<li>
<p><strong>Deployment å¼€å§‹æ»šåŠ¨æ›´æ–°</strong></p>
<ul>
<li>Devflow Controller ç›‘å¬ Deployment çŠ¶æ€</li>
<li>æŒç»­æ›´æ–° <code>steps</code> ä¸ <code>job status</code>ï¼š
<ul>
<li>Rolling Update â†’ Verifyï¼ˆæˆåŠŸï¼‰</li>
<li>Completed</li>
</ul>
</li>
<li>è‹¥æ–°ç‰ˆæœ¬ Pod å¯åŠ¨å¤±è´¥ï¼ˆå¦‚ NotReady / CrashLoopBackOffï¼‰ï¼Œå¯¹åº” Verify è¿›å…¥ <code>Failed</code> å¹¶è§¦å‘å›æ»š</li>
</ul>
</li>
</ol>
<blockquote class='book-hint '>
<p>è‹¥ Verify å¤±è´¥ï¼ŒController æ ‡è®°å¯¹åº”é˜¶æ®µå¤±è´¥å¹¶è§¦å‘å›æ»šæµç¨‹ï¼ˆæŒ‰ç­–ç•¥è‡ªåŠ¨æˆ–äººå·¥ä»‹å…¥ï¼‰ã€‚</p>
</blockquote><hr>
<h2 id="-3-normalrollingsteps--status-å¯¹ç…§è¡¨">ğŸ“‹ 3. Normalï¼ˆRollingï¼‰Steps / Status å¯¹ç…§è¡¨<a class="anchor" href="#-3-normalrollingsteps--status-%e5%af%b9%e7%85%a7%e8%a1%a8">#</a></h2>
<table>
  <thead>
      <tr>
          <th>Step</th>
          <th>çŠ¶æ€ï¼ˆStatusï¼‰</th>
          <th>è§¦å‘äº‹ä»¶ / è¯´æ˜</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Applied</td>
          <td>Running â†’ Succeeded/Failed</td>
          <td>Application åˆ›å»ºå¹¶ Sync æˆåŠŸ</td>
      </tr>
      <tr>
          <td>Rolling Update</td>
          <td>Running â†’ Succeeded</td>
          <td>Deployment æ»šåŠ¨æ›´æ–°è¿›è¡Œä¸­</td>
      </tr>
      <tr>
          <td>Verify</td>
          <td>Running â†’ Succeeded / Failed</td>
          <td>æŒ‡æ ‡é€šè¿‡æˆ– Pod å¯åŠ¨æ­£å¸¸ / Pod NotReady æˆ– CrashLoopBackOff</td>
      </tr>
      <tr>
          <td>Completed</td>
          <td>Succeeded</td>
          <td>å‘å¸ƒå®Œæˆ</td>
      </tr>
      <tr>
          <td>Failed</td>
          <td>Failed</td>
          <td>Verify å¤±è´¥è§¦å‘å›æ»š</td>
      </tr>
      <tr>
          <td>Rollback to Stable</td>
          <td>Succeeded</td>
          <td>å›æ»šè‡³ç¨³å®šç‰ˆæœ¬</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="-4-é€‚ç”¨åœºæ™¯">âœ… 4. é€‚ç”¨åœºæ™¯<a class="anchor" href="#-4-%e9%80%82%e7%94%a8%e5%9c%ba%e6%99%af">#</a></h2>
<ul>
<li>æ™®é€šä¸šåŠ¡ç³»ç»Ÿ</li>
<li>å¯¹ç²¾ç»†åŒ–æµé‡æ§åˆ¶è¦æ±‚ä¸é«˜</li>
<li>èµ„æºæˆæœ¬æ•æ„Ÿä¸”å‘å¸ƒé¢‘ç‡è¾ƒé«˜</li>
</ul>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">

<div>

</div>

<div>

</div>

</div>





  
  
  
  <div class="flex flex-wrap justify-between">
    <span>
    
      <a href="/docs/cd/blue_green/" class="flex align-center">
        <img src="/icons/backward.svg" class="book-icon" alt="Backward" />
        <span>Blue-green</span>
      </a>
    
    </span>
    <span>
    
      <a href="/docs/observability/" class="flex align-center">
        <span>observability</span>
        <img src="/icons/forward.svg" class="book-icon" alt="Forward" />
      </a>
    
    </span>
  </div>
  


 
        
  
 
        
        
  
 
        
  
  
    <script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script>
  

      </footer>

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  
 
  </main>

  
</body>
</html>




















